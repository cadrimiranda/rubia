<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Auth</title>
</head>
<body>
    <h2>Authentication Debug</h2>
    <div id="debug-info"></div>
    
    <script>
        const debugInfo = document.getElementById('debug-info');
        
        const authToken = localStorage.getItem('auth_token');
        const authUser = localStorage.getItem('auth_user');
        const companyId = localStorage.getItem('auth_company_id');
        const expiresAt = localStorage.getItem('token_expires_at');
        
        const now = Date.now();
        const isExpired = expiresAt ? now > parseInt(expiresAt) : 'N/A';
        
        debugInfo.innerHTML = `
            <p><strong>Auth Token:</strong> ${authToken ? 'Present (' + authToken.substring(0, 20) + '...)' : 'Missing'}</p>
            <p><strong>Auth User:</strong> ${authUser ? 'Present' : 'Missing'}</p>
            <p><strong>Company ID:</strong> ${companyId || 'Missing'}</p>
            <p><strong>Token Expires At:</strong> ${expiresAt ? new Date(parseInt(expiresAt)).toLocaleString() : 'N/A'}</p>
            <p><strong>Is Expired:</strong> ${isExpired}</p>
            <p><strong>Current Time:</strong> ${new Date().toLocaleString()}</p>
            <hr>
            <p><strong>All localStorage keys:</strong></p>
            <ul>
                ${Object.keys(localStorage).map(key => `<li>${key}: ${localStorage.getItem(key)?.substring(0, 50)}${localStorage.getItem(key)?.length > 50 ? '...' : ''}</li>`).join('')}
            </ul>
        `;
    </script>
</body>
</html>